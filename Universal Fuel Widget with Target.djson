{"Variables":{"DashboardVariables":[{"VariableName":"targetOffset","EvaluateOnlyOnce":false,"OverrideWithParentDashboardVariableWhenAvailable":true,"ValueExpression":{"Expression":"0"},"EvaluateBeforeScreenRoles":false},{"VariableName":"estimatedLaps","EvaluateOnlyOnce":false,"OverrideWithParentDashboardVariableWhenAvailable":true,"ValueExpression":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId');\r\nconst validLap = $prop('DataCorePlugin.Computed.Fuel_CurrentLapIsValidForTracking');\r\n\r\nconst { property, getFinalValue: getFinalLapsValue } = getPropertyValueFromConfig(config, currentGame, carClass, carId, 'fuel', 'laps');\r\nconst rawLaps = $prop(property);\r\nconst simhubRemaining = getFinalLapsValue(rawLaps);\r\n\r\nconst { property: stateProp, getFinalValue: getFinalState } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"state\", root);\r\nconst rawStateValue = $prop(stateProp);\r\nconst fuelState = getFinalState(rawStateValue);\r\n\r\nconst { property: usageProp, getFinalValue: getFinalUsage } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"lapUsage\", root);\r\nconst { property: avgUsageProp, getFinalValue: getAvgUsage } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"avgUsage\", root);\r\nconst rawValue = $prop(usageProp);\r\nconst fuelUsage = getFinalUsage(rawValue);\r\nconst rawAvg = $prop(avgUsageProp);\r\nconst avgUsage = getAvgUsage(rawAvg);\r\n\r\nconst currentLap = $prop('CurrentLap');\r\n\r\nroot.prevLap = root.prevLap ?? currentLap;\r\nroot.usages = root.usages ?? {};\r\n\r\nconst lastLapUsages = cycleValuesOverNLaps(currentLap, fuelUsage, root.usages, 5, validLap);\r\nconst averageUsage = lastLapUsages.every(usage => !!usage) ? calculateArrayAverage(lastLapUsages) : avgUsage;\r\n\r\nconst isPit = $prop('IsInPit');\r\nconst remaining = fuelState && averageUsage ? fuelState / averageUsage : 0;\r\n\r\nif(!isPit && ((root.pushUsage == null || root.saveusage == null) || currentLap % REFRESH_INTERVAL == 0)) {\r\n\troot.pushUsage = root.pushUsage ? (root.pushUsage >  averageUsage ? root.pushUsage : averageUsage) : averageUsage;\r\n\troot.saveUsage = root.saveUsage ? (root.saveUsage < averageUsage ? root.saveUsage : averageUsage) : averageUsage;\r\n\troot.avgUsage = averageUsage;\r\n}\r\n\r\nreturn { remaining: simhubRemaining || remaining, loadedFuel: fuelState, pushUsage: root.pushUsage, saveUsage: root.saveUsage, avgUsage: averageUsage };","PreExpression":"const config = loadFromConfig();\r\nconst REFRESH_INTERVAL = 5;"},"EvaluateBeforeScreenRoles":false},{"VariableName":"strategy","EvaluateOnlyOnce":false,"OverrideWithParentDashboardVariableWhenAvailable":true,"ValueExpression":{"Expression":""},"EvaluateBeforeScreenRoles":false}]},"DashboardDebugManager":{},"Version":2,"Id":"dfe7ff2d-4702-4633-b2b7-ee2accbbba20","BaseHeight":768,"BaseWidth":1280,"BackgroundColor":"#FF000000","Screens":[{"RenderingSkip":0,"Name":"Screen","InGameScreen":true,"IdleScreen":true,"PitScreen":false,"ScreenId":"de785561-f0dc-4982-8e6f-ffe1a0c6455e","AllowOverlays":true,"IsForegroundLayer":false,"IsOverlayLayer":false,"OverlayTriggerExpression":{"Expression":""},"ScreenEnabledExpression":{"Expression":""},"OverlayMaxDuration":0,"OverlayMinDuration":0,"IsBackgroundLayer":false,"BackgroundColor":"#FF000000","Items":[{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.Layer, SimHub.Plugins","Group":true,"Repetitions":0,"Childrens":[{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.Layer, SimHub.Plugins","Group":true,"Repetitions":0,"IsFreezed":true,"Childrens":[{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontWeight":"Medium","FontStyle":"Italic","FontSize":50.0,"Text":"12.5","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":70.0,"Left":223.0,"Top":286.0,"Visible":true,"BlinkPhasisInverted":false,"Width":229.0,"Name":"FuelELaps","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"Text":{"FormatString":"0.00","Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId');\r\nconst validLap = $prop('DataCorePlugin.Computed.Fuel_CurrentLapIsValidForTracking');\r\n\r\nconst { property, getFinalValue: getFinalLapsValue } = getPropertyValueFromConfig(config, currentGame, carClass, carId, 'fuel', 'laps');\r\nconst rawLaps = $prop(property);\r\nconst simhubRemaining = getFinalLapsValue(rawLaps);\r\n\r\nconst { property: stateProp, getFinalValue: getFinalState } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"state\", root);\r\nconst rawStateValue = $prop(stateProp);\r\nconst fuelState = getFinalState(rawStateValue);\r\n\r\nconst { property: usageProp, getFinalValue: getFinalUsage } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"lapUsage\", root);\r\nconst { property: avgUsageProp, getFinalValue: getAvgUsage } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"avgUsage\", root);\r\n\r\nconst rawValue = $prop(usageProp);\r\nconst fuelUsage = getFinalUsage(rawValue);\r\nconst rawAvg = $prop(avgUsageProp);\r\nconst avgUsage = getAvgUsage(rawAvg);\r\n\r\nconst currentLap = $prop('CurrentLap');\r\n\r\nroot.usages = root.usages ?? {};\r\n\r\nconst lastLapUsages = cycleValuesOverNLaps(currentLap, fuelUsage, root.usages, 5, validLap);\r\nconst averageUsage = lastLapUsages.every(usage => !!usage) ? calculateArrayAverage(lastLapUsages) : avgUsage;\r\n\r\nconst remaining = fuelState && averageUsage ? fuelState / averageUsage : 0;\r\n\r\nreturn remaining","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontSize":40.0,"Text":"ELaps","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":70.0,"Left":223.0,"Top":237.0,"Visible":true,"BlinkPhasisInverted":false,"Width":229.0,"Name":"FuelELapsText","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId');\r\nconst label = getPropertyUILabelFromConfig(config, currentGame, carClass, carId, 'fuel', 'laps');\r\n\r\nreturn label;","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontStyle":"Italic","FontSize":45.0,"Text":"45:13.725","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":66.0,"Left":200.0,"Top":619.0,"Visible":true,"BlinkPhasisInverted":false,"Width":260.0,"IsFreezed":true,"Name":"Fuel Time","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"Text":{"FormatString":"mm\\:ss\\.fff","Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId');\r\nconst { property, getFinalValue } = getPropertyValueFromConfig(config, currentGame, carClass, carId, 'fuel', 'time');\r\n\r\nconst rawValue = $prop(property);\r\n\r\nif (timespantoseconds(rawValue)) {\r\n\treturn getFinalValue(rawValue);\r\n}\r\n\r\nconst validLap = $prop('DataCorePlugin.Computed.Fuel_CurrentLapIsValidForTracking');\r\n\r\nconst { property: stateProp, getFinalValue: getFinalState } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"state\", root);\r\nconst rawStateValue = $prop(stateProp);\r\nconst fuelState = getFinalState(rawStateValue);\r\n\r\nconst { property: usageProp, getFinalValue: getFinalUsage } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"lapUsage\", root);\r\nconst { property: avgUsageProp, getFinalValue: getAvgUsage } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"avgUsage\", root);\r\nconst rawUsage = $prop(usageProp);\r\nconst fuelUsage = getFinalUsage(rawUsage);\r\nconst rawAvg = $prop(avgUsageProp);\r\nconst avgUsage = getAvgUsage(rawAvg);\r\n\r\nconst currentLap = $prop('CurrentLap');\r\n\r\nroot.usages = root.usages ?? {};\r\n\r\nconst lastLapUsages = cycleValuesOverNLaps(currentLap, fuelUsage, root.usages, 5, validLap);\r\nconst averageUsage = lastLapUsages.every(usage => !!usage) ? calculateArrayAverage(lastLapUsages) : avgUsage;\r\n\r\nconst result = fuelState / averageUsage;\r\n\r\nconst lastLapTime = $prop('LastLapTime');\r\nroot.lapTimes = root.lapTimes ?? {}\r\nconst validLapTimes = cycleValuesOverNLaps(currentLap, timespantoseconds(lastLapTime), root.lapTimes, 5, validLap);\r\nconst averageLapTime = calculateArrayAverage(validLapTimes);\r\n\r\nif(!averageLapTime) {\r\n\treturn '--:--.---'\r\n}\r\n\r\nreturn !Number.isNaN(result) ? secondstotimespan((fuelState / averageUsage) * averageLapTime) : '--:--.---'","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontSize":45.0,"Text":"ETime","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":70.0,"Left":216.0,"Top":561.0,"Visible":true,"BlinkPhasisInverted":false,"Width":229.0,"IsFreezed":true,"Name":"Fuel Time Text","RenderingSkip":500,"MinimumRefreshIntervalMS":5000.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\nconst label = getPropertyUILabelFromConfig(config, currentGame, carClass, carId, \"fuel\", \"time\", root);\r\n\r\nreturn label;","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontSize":45.0,"Text":"ToAdd","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":68.0,"Left":14.0,"Top":561.0,"Visible":true,"BlinkPhasisInverted":false,"Width":200.0,"IsFreezed":true,"Name":"FuelToAdd Text","RenderingSkip":500,"MinimumRefreshIntervalMS":5000.0},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontStyle":"Italic","FontSize":50.0,"Text":"150L","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":100.0,"Left":30.0,"Top":604.0,"Visible":true,"BlinkPhasisInverted":false,"Width":160.0,"IsFreezed":true,"Name":"FuelToAdd","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"Text":{"FormatString":"0L","Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\n\r\nconst currentLap = $prop('CurrentLap')\r\nconst lastLap = timespantoseconds($prop('LastLapTime'))\r\nconst timeSes = timespantoseconds($prop('SessionTimeLeft'))\r\n\r\nconst validLap = $prop('DataCorePlugin.Computed.Fuel_CurrentLapIsValidForTracking');\r\n\r\nconst { property: stateProp, getFinalValue: getFinalState } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"state\", root);\r\n\r\nconst rawState = $prop(stateProp);\r\nconst fuelTank = getFinalState(rawState);\r\n\r\nconst { property, getFinalValue } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"lapUsage\", root);\r\n\r\nconst rawValue = $prop(property);\r\nconst lastFuel = getFinalValue(rawValue);\r\n\r\nroot.estimate = root.estimate ?? {};\r\n\r\nreturn estimateRequiredForSeconds(currentLap, lastLap, fuelTank, lastFuel, timeSes, root.estimate, validLap);","PreExpression":"const config = loadFromConfig();"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.BuiltIn.FuelText, SimHub.Plugins","Format":"0.00","NoDataText":"N/A","IsTextItem":true,"Font":"Arial","FontStyle":"Italic","FontSize":50.0,"TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":66.0,"Left":255.0,"Top":189.0,"Visible":true,"BlinkPhasisInverted":false,"Width":160.0,"IsFreezed":true,"Name":"Fuel","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontSize":40.0,"Text":"Tank","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":70.0,"Left":223.0,"Top":140.0,"Visible":true,"BlinkPhasisInverted":false,"Width":229.0,"IsFreezed":true,"Name":"FuelText","RenderingSkip":500,"MinimumRefreshIntervalMS":5000.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\nconst label = getPropertyUILabelFromConfig(config, currentGame, carClass, carId, \"fuel\", \"state\", root);\r\n\r\nreturn label;","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontSize":40.0,"Text":"TLap","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":70.0,"Left":3.0,"Top":140.0,"Visible":true,"BlinkPhasisInverted":false,"Width":229.0,"IsFreezed":true,"Name":"Lap Fuel Text","RenderingSkip":500,"MinimumRefreshIntervalMS":5000.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\nconst label = getPropertyUILabelFromConfig(config, currentGame, carClass, carId, \"fuel\", \"usage\", root);\r\n\r\nreturn label;","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontStyle":"Italic","FontSize":50.0,"Text":"10.40","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":66.0,"Left":40.0,"Top":189.0,"Visible":true,"BlinkPhasisInverted":false,"Width":160.0,"IsFreezed":true,"Name":"Lap Fuel Actual","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"Text":{"FormatString":"0.00L","Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\n\r\nconst { property, transformation, getFinalValue } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"usage\", root);\r\n\r\nconst rawValue = $prop(property);\r\n\r\nconst value = getFinalValue(rawValue);\r\n\r\nif (value < 0) {\r\n\treturn '-'\r\n}\r\n\r\nreturn value;","PreExpression":"const config = loadFromConfig(root);"},"Mode":2},"TextColor":{"Formula":{"Expression":"if([DataCorePlugin.Computed.Fuel_CurrentLapConsumption]>[DataCorePlugin.Computed.Fuel_LastLapConsumption], '#FFE82222', '#FFFFFFFF')"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontSize":40.0,"Text":"Lap Î”","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":70.0,"Left":10.0,"Top":339.0,"Visible":true,"BlinkPhasisInverted":false,"Width":229.0,"IsFreezed":true,"Name":"Fuel Delta Text","RenderingSkip":500,"MinimumRefreshIntervalMS":5000.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\nconst label = getPropertyUILabelFromConfig(config, currentGame, carClass, carId, \"fuel\", \"nrgDelta\", root);\r\n\r\nreturn label;","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontStyle":"Italic","FontSize":50.0,"Text":"0.00","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":66.0,"Left":40.0,"Top":387.0,"Visible":true,"BlinkPhasisInverted":false,"Width":160.0,"IsFreezed":true,"Name":"Fuel Delta","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"Text":{"FormatString":"0.00","Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\n\r\nconst { property, getFinalValue } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"nrgDelta\", root);\r\n\r\nconst rawValue = $prop(property);\r\n\r\nconst currentValue = getFinalValue(rawValue);\r\nconst currentLapNumber = $prop('CurrentLap');\r\n\r\nconst delta = formattedDeltaOverLastLap(currentLapNumber, currentValue, root);\r\n\r\nreturn delta","PreExpression":"const config = loadFromConfig(root);"},"Mode":2},"TextColor":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\n\r\nconst { property, getFinalValue } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"nrgDelta\", root);\r\n\r\nconst rawValue = $prop(property);\r\n\r\nconst currentValue = getFinalValue(rawValue);\r\nconst currentLapNumber = $prop('CurrentLap');\r\n\r\nconst delta = formattedDeltaOverLastLap(currentLapNumber, currentValue, root);\r\n\r\nconst { color: positiveColor, defaultForeground } = getThemeColorValueFromConfig(config, currentGame, carClass, carId, \"positive\");\r\n\r\nconst { color: negativeColor } = getThemeColorValueFromConfig(config, currentGame, carClass, carId, \"negative\");\r\n\r\nif(parseInt(delta) === 0) {\r\n\treturn defaultForeground;\r\n}\r\n\r\nreturn delta > 0 ? positiveColor : negativeColor;","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontSize":40.0,"Text":"Tgt 32 (+0)","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":70.0,"Left":222.0,"Top":339.0,"Visible":true,"BlinkPhasisInverted":false,"Width":239.0,"Name":"Target Delta Text","RenderingSkip":500,"MinimumRefreshIntervalMS":5000.0,"Bindings":{"Text":{"Formula":{"JSExt":0,"Interpreter":1,"Expression":"const targetLaps = Math.floor($prop('variable.estimatedLaps').remaining) + $prop('variable.targetOffset')\r\n\r\nreturn \"Tgt \" + targetLaps + \"L (\" + ($prop('variable.targetOffset') >= 0 ? \"+\" : \"\") + $prop('variable.targetOffset') + \")\""},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontStyle":"Italic","FontSize":45.0,"Text":"-0.15 (2.87)","TextColor":"#FF00FF00","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":66.0,"Left":210.0,"Top":387.0,"Visible":true,"BlinkPhasisInverted":false,"Width":260.0,"Name":"Target Delta","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"Text":{"FormatString":"0.00","Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId');\r\nconst isPit = $prop('IsInPit');\r\nconst currentLap = $prop('CurrentLap');\r\n\r\nconst { property, getFinalValue } = getPropertyValueFromConfig(config, currentGame, carClass, carId, 'fuel', 'state');\r\n\r\nconst rawValue = $prop(property);\r\nconst curFuel = getFinalValue(rawValue);\r\n\r\nconst { remaining, loadedFuel, avgUsage, pushUsage, saveUsage } = $prop('variable.estimatedLaps');\r\nconst offset = $prop('variable.targetOffset');\r\nconst strategy = $prop('variable.strategy');\r\n\r\nconst targetUsage = cycle(isPit, currentLap, curFuel, remaining, strategy, offset, saveUsage, pushUsage);\r\n\r\nif(targetUsage == null) {\r\n\treturn '- (-)';\r\n}\r\n\r\nif(Number.isNaN(targetUsage)) {\r\n\treturn '- (-)';\r\n}\r\n\r\nconst delta = targetUsage;\r\n\r\nreturn (delta > 0 ? '+' : '') + delta.toFixed(2) + ' (' + targetUsage.toFixed(2) + ')';","PreExpression":"const config = loadFromConfig(root);\r\n\r\nfunction cycle(isPit, currentLap, curFuel, remaining, strategy, tgtOffset, saveUsage, pushUsage) {\r\n\tconst offset = !strategy ? tgtOffset : 0;\r\n\r\n\troot.offset = root.offset ?? offset;\r\n\troot.elapsed = root.elapsed ?? 0;\r\n\troot.isPit = root.isPit ?? isPit;\r\n    root.fuelState = root.fuelState ?? curFuel;\r\n\r\n    if (isPit || root.prevLap > currentLap) {\r\n\t\troot.offset = null;\r\n\t\troot.elapsed = null;\r\n        root.prevLap = null;\r\n        root.remaining = null;\r\n        root.fuelState = null;\r\n    } \r\n\r\n    if (!isPit && (root.prevLap === null || root.prevLap > currentLap)) {\r\n\t    root.remaining = remaining + root.offset;\r\n\t    root.fuelState = curFuel;\r\n        root.prevLap = currentLap;\r\n    }\r\n\t\r\n\tif (strategy && root.prevLap < currentLap) {\r\n\t\treturn strategy === 'push' ? pushUsage : saveUsage;\r\n\t}\r\n\r\n    if (root.prevLap < currentLap && root.remaining) {\r\n\t\tif (!strategy && root.elapsed <= offset) {\r\n\t\t\troot.elapsed = root.elapsed + 1;\r\n\t\t\troot.remaining = root.remaining - 1;\r\n\t\t}\r\n\r\n        root.prevLap = currentLap;\r\n\t\troot.fuelState = curFuel;\r\n    }\r\n    \r\n    if (isPit) {\r\n    \treturn null;\r\n    }\r\n    \r\n    const target = root.remaining;\r\n    const targetUsage = root.fuelState / (target + 1);\r\n    \r\n\treturn isPit ? null : targetUsage;\r\n}\r\n"},"Mode":2},"TextColor":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId');\r\nconst isPit = $prop('IsInPit');\r\nconst currentLap = $prop('CurrentLap');\r\n\r\nconst { property, getFinalValue } = getPropertyValueFromConfig(config, currentGame, carClass, carId, 'fuel', 'state');\r\n\r\nconst rawValue = $prop(property);\r\nconst curFuel = getFinalValue(rawValue);\r\n\r\nconst { remaining, loadedFuel, avgUsage, pushUsage, saveUsage } = $prop('variable.estimatedLaps');\r\nconst offset = $prop('variable.targetOffset');\r\nconst strategy = $prop('variable.strategy');\r\n\r\nconst targetUsage = cycle(isPit, currentLap, curFuel, remaining, strategy, offset, saveUsage, pushUsage);\r\n\r\nconst result = targetUsage;\r\n\r\nif(Number.isNaN(result) || !result) {\r\n\treturn 1;\r\n}\r\n\r\nreturn result < 0 ? 0 : 2;","PreExpression":"const config = loadFromConfig(root);\r\n\r\nfunction cycle(isPit, currentLap, curFuel, remaining, strategy, tgtOffset, saveUsage, pushUsage) {\r\n\tconst offset = !strategy ? tgtOffset : 0;\r\n\r\n\troot.offset = root.offset ?? offset;\r\n\troot.elapsed = root.elapsed ?? 0;\r\n\troot.isPit = root.isPit ?? isPit;\r\n    root.fuelState = root.fuelState ?? curFuel;\r\n\r\n    if (isPit || root.prevLap > currentLap) {\r\n\t\troot.offset = null;\r\n\t\troot.elapsed = null;\r\n        root.prevLap = null;\r\n        root.remaining = null;\r\n        root.fuelState = null;\r\n    } \r\n\r\n    if (!isPit && (root.prevLap === null || root.prevLap > currentLap)) {\r\n\t    root.remaining = remaining + root.offset;\r\n\t    root.fuelState = curFuel;\r\n        root.prevLap = currentLap;\r\n    }\r\n\t\r\n\tif (strategy && root.prevLap < currentLap) {\r\n\t\treturn strategy === 'push' ? pushUsage : saveUsage;\r\n\t}\r\n\r\n    if (root.prevLap < currentLap && root.remaining) {\r\n\t\tif (!strategy && root.elapsed <= offset) {\r\n\t\t\troot.elapsed = root.elapsed + 1;\r\n\t\t\troot.remaining = root.remaining - 1;\r\n\t\t}\r\n\r\n        root.prevLap = currentLap;\r\n\t\troot.fuelState = curFuel;\r\n    }\r\n    \r\n    if (isPit) {\r\n    \treturn null;\r\n    }\r\n    \r\n    const target = root.remaining;\r\n    const targetUsage = root.fuelState / (target + 1);\r\n    \r\n\treturn isPit ? null : targetUsage;\r\n}\r\n"},"StartColor":"#FF00FF00","EnableMiddleColor":true,"MiddleColor":"#FFF0F8FF","MiddleColorValue":1.0,"EndColor":"#FFFF0000","StartColorValue":0.0,"EndColorValue":2.0,"Mode":4}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontStyle":"Italic","FontSize":50.0,"Text":"0.00","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":67.0,"Left":41.0,"Top":286.0,"Visible":true,"BlinkPhasisInverted":false,"Width":160.0,"Name":"FuelLastLap","RenderingSkip":50,"MinimumRefreshIntervalMS":500.0,"Bindings":{"Text":{"FormatString":"0.00","Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\nconst { property, getFinalValue, transformation, test } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"lapUsage\", root);\r\n\r\nconst rawValue = $prop(property);\r\n\r\nreturn getFinalValue(rawValue) || '-';","PreExpression":"const config = loadFromConfig();"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontSize":40.0,"Text":"LLap","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":70.0,"Left":7.0,"Top":237.0,"Visible":true,"BlinkPhasisInverted":false,"Width":229.0,"Name":"FuelLastLapText","RenderingSkip":500,"MinimumRefreshIntervalMS":5000.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\n\r\nconst label = getPropertyUILabelFromConfig(config, currentGame, carClass, carId, 'fuel', 'lapUsage');\r\n\r\nreturn label;","PreExpression":"const config = loadFromConfig();"},"Mode":2}}}],"Visible":true,"BlinkPhasisInverted":false,"Name":"Fuel","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.Layer, SimHub.Plugins","Group":true,"Repetitions":0,"IsFreezed":true,"Childrens":[{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontSize":40.0,"Text":"NRG","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":70.0,"Left":2.0,"Top":444.0,"Visible":true,"BlinkPhasisInverted":false,"Width":229.0,"Name":"NRG State Text","RenderingSkip":500,"MinimumRefreshIntervalMS":5000.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\nconst label = getPropertyUILabelFromConfig(config, currentGame, carClass, carId, \"fuel\", \"nrgState\", root);\r\n\r\nreturn label;","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontStyle":"Italic","FontSize":50.0,"Text":"100.00","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":66.0,"Left":35.0,"Top":492.0,"Visible":true,"BlinkPhasisInverted":false,"Width":160.0,"Name":"NRG State","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"Text":{"FormatString":"0.00","Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\nconst { property, getFinalValue, transformation, test } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"nrgState\", root);\r\n\r\nconst rawValue = $prop(property);\r\n\r\nreturn getFinalValue(rawValue);","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.Layer, SimHub.Plugins","Group":true,"Repetitions":0,"Childrens":[{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontStyle":"Italic","FontSize":50.0,"Text":"54.00","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":66.0,"Left":255.0,"Top":492.0,"Visible":true,"BlinkPhasisInverted":false,"Width":160.0,"Name":"NRG Laps","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"Text":{"FormatString":"0.00","Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\nconst { property, getFinalValue } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"nrgState\", root);\r\n\r\nconst rawStateValue = $prop(property);\r\n\r\nconst nrgState = getFinalValue(rawStateValue);\r\n\r\nconst { property: usageProp, getFinalValue: getFinalUsage } = getPropertyValueFromConfig(config, currentGame, carClass, carId, \"fuel\", \"nrgUsage\", root);\r\n\r\nconst rawValue = $prop(usageProp);\r\nconst nrgUsage = getFinalUsage(rawValue);\r\n\r\nconst result = nrgState / nrgUsage;\r\n\r\nreturn !Number.isNaN(result) ? nrgState / nrgUsage : '-'","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Arial","FontSize":40.0,"Text":"ELaps","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","Height":70.0,"Left":223.0,"Top":443.0,"Visible":true,"BlinkPhasisInverted":false,"Width":229.0,"Name":"NRG Laps Text","RenderingSkip":500,"MinimumRefreshIntervalMS":5000.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\nconst label = getPropertyUILabelFromConfig(config, currentGame, carClass, carId, \"fuel\", \"nrgUsage\", root);\r\n\r\nreturn label;","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}}],"Visible":true,"BlinkPhasisInverted":false,"Name":"NRG Laps","RenderingSkip":500,"MinimumRefreshIntervalMS":5000.0,"Bindings":{"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\nconst label = getPropertyUILabelFromConfig(config, currentGame, carClass, carId, \"fuel\", \"nrgUsage\", root);\r\n\r\nreturn !!label;","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}}],"Visible":true,"BlinkPhasisInverted":false,"Name":"NRG","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0,"Bindings":{"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId')\r\nconst label = getPropertyUILabelFromConfig(config, currentGame, carClass, carId, \"fuel\", \"nrgState\", root);\r\n\r\nreturn !!label;","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.Layer, SimHub.Plugins","Group":true,"Repetitions":0,"IsFreezed":true,"Childrens":[{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.RectangleItem, SimHub.Plugins","IsRectangleItem":true,"BackgroundColor":"#00FFFFFF","BorderStyle":{"BorderTop":2,"BorderLeft":2,"BorderRight":2},"Height":320.0,"Left":5.0,"Top":141.0,"Visible":true,"BlinkPhasisInverted":false,"Width":503.0,"Name":"RectangleItem","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.RectangleItem, SimHub.Plugins","IsRectangleItem":true,"BackgroundColor":"#00FFFFFF","BorderStyle":{"BorderBottom":2,"BorderLeft":2},"Height":618.0,"Left":5.0,"Top":141.0,"Visible":true,"BlinkPhasisInverted":false,"Width":438.0,"Name":"RectangleItem","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0}],"Visible":true,"BlinkPhasisInverted":false,"Name":"Outline","RenderingSkip":0,"MinimumRefreshIntervalMS":0.0},{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.Layer, SimHub.Plugins","Group":true,"Repetitions":0,"IsFreezed":true,"Childrens":[{"$type":"SimHub.Plugins.OutputPlugins.GraphicalDash.Models.TextItem, SimHub.Plugins","IsTextItem":true,"Font":"Segoe UI","FontSize":25.0,"Text":"Fuel","TextColor":"#FFFFFFFF","HorizontalAlignment":1,"VerticalAlignment":1,"BackgroundColor":"#00FFFFFF","BorderStyle":{"BorderTop":2,"BorderRight":2},"Height":35.0,"Left":7.0,"Top":722.0,"Visible":true,"BlinkPhasisInverted":false,"Width":120.0,"IsFreezed":true,"Name":"Fuel Label","RenderingSkip":500,"MinimumRefreshIntervalMS":5000.0,"Bindings":{"Text":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId');\r\n\r\nreturn getMasterSectionLabelFromConfig(config, currentGame, carClass, carId, \"fuel\", root);","PreExpression":"const config = loadFromConfig(root);"},"Mode":2},"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId');\r\n\r\nreturn !!getMasterSectionLabelFromConfig(config, currentGame, carClass, carId, \"fuel\", root);","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}}],"Visible":true,"BlinkPhasisInverted":false,"Name":"Master Label","RenderingSkip":500,"MinimumRefreshIntervalMS":5000.0}],"Visible":true,"BlinkPhasisInverted":false,"Name":"Fuel and Energy","RenderingSkip":50,"MinimumRefreshIntervalMS":500.0,"Bindings":{"Visible":{"Formula":{"JSExt":1,"Interpreter":1,"Expression":"const currentGame = $prop('DataCorePlugin.CurrentGame');\r\nconst carClass = $prop('CarClass');\r\nconst carId = $prop('CarId');\r\n\r\nreturn !!getMasterSectionLabelFromConfig(config, currentGame, carClass, carId, \"fuel\", root);","PreExpression":"const config = loadFromConfig(root);"},"Mode":2}}}],"MinimumRefreshIntervalMS":0.0}],"SnapToGrid":false,"HideLabels":false,"ShowForeground":true,"ForegroundOpacity":100.0,"ShowBackground":true,"BackgroundOpacity":100.0,"ShowBoundingRectangles":false,"GridSize":10,"Images":[],"Metadata":{"ScreenCount":1.0,"InGameScreensIndexs":[0],"IdleScreensIndexs":[0],"MainPreviewIndex":0,"IsOverlay":false,"OverlaySizeWarning":true,"MetadataVersion":2.0,"EnableOnDashboardMessaging":true,"PitScreensIndexs":[],"SimHubVersion":"9.9.3","Width":1280.0,"Height":768.0,"DashboardVersion":""},"ShowOnScreenControls":true,"IsOverlay":false,"EnableClickThroughOverlay":true,"EnableOnDashboardMessaging":true,"UseStrictJSIsolation":false,"UseStrictJSIsolationWarning":true}